<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EasyPay PTC Task</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4fdf7;
      color: #222;
      margin: 0; padding: 0;
      line-height: 1.6;
    }
    header {
      background-color: #0f9d58;
      color: #fff;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
      position: relative;
    }
    .timer {
      position: absolute;
      top: 50%;
      right: 1rem;
      transform: translateY(-50%);
      font-size: 1.25rem;
      background: rgba(255,255,255,0.2);
      padding: 0.25rem 0.75rem;
      border-radius: 6px;
    }
    .notice {
      background: #e6fff0;
      border-left: 4px solid #0f9d58;
      padding: 1rem;
      margin: 1rem;
      border-radius: 8px;
      font-size: 0.95rem;
    }
    .container {
      max-width: 800px;
      margin: 0 auto 2rem;
      padding: 0 1rem;
    }
    h2 {
      color: #0f9d58;
      margin-top: 1.5rem;
    }
    img {
      width: 100%;
      max-height: 250px;
      object-fit: cover;
      margin: 10px 0;
      border-radius: 10px;
    }
    ul {
      padding-left: 1.2rem;
    }
  </style>
</head>
<body>

  <header>
    EasyPay PTC Task
    <div class="timer" id="timer">20s</div>
  </header>

  <div class="notice">
    <strong>Important!</strong> JavaScript & cookies must be enabled, ad-blocker off, no VPN, and stay on this page until the timer reaches zero.
  </div>

  <div class="container">
    <!-- Blog Content -->
    <h2>The World of Sports: A Journey of Passion, Perseverance, and Triumph 🏆</h2>
    <img src="images/sports-banner.jpg" alt="Sports banner"/>
    <p>
      Sports have been an integral part of human culture for centuries, bringing people together, fostering community, and inspiring greatness. From the thrill of competition to the joy of recreation, sports play a significant role in our lives, shaping our personalities, building our character, and creating lifelong memories. 🌟
    </p>

    <h2>The Benefits of Sports 🌈</h2>
    <img src="images/benefits.jpg" alt="Health benefits of sports"/>
    <p>
      Engaging in sports offers numerous benefits, including improved physical health, enhanced mental well-being, and increased social connections. Regular physical activity can reduce the risk of chronic diseases, such as heart disease, diabetes, and obesity, while also boosting mood and energy levels. 🏋️‍♀️ Sports also provide opportunities for socialization, teamwork, and leadership development, essential skills for personal and professional growth.
    </p>

    <h2>Popular Sports Around the World 🌎</h2>
    <ul>
      <li><strong>Football (Soccer):</strong> The world's most popular sport, with top leagues like the English Premier League, La Liga, and the Champions League. ⚽️</li>
      <li><strong>Basketball:</strong> A fast-paced, high-flying sport, with the NBA being one of the most prestigious leagues globally. 🏀</li>
      <li><strong>Tennis:</strong> A sport of skill, strategy, and physical endurance, with Grand Slam tournaments like Wimbledon, the US Open, and the Australian Open. 🎾</li>
      <li><strong>Cricket:</strong> A bat-and-ball game with a massive following in countries like India, Australia, and the UK, with international competitions like the World Cup. 🏏</li>
      <li><strong>Volleyball:</strong> A popular team sport, played indoors and on beaches, with international competitions like the Olympics and World Championships. 🏐</li>
    </ul>
    <img src="images/1000237367.jpg" alt="Tennis player lunging for a shot on clay court"/>

    <h2>The Impact of Sports on Society 🌟</h2>
    <p>
      Sports have a profound impact on society, promoting social cohesion, cultural exchange, and economic growth. Major sporting events like the Olympics, World Cups, and marathons bring people together, fostering a sense of community and national pride. 🏆 Sports also provide opportunities for women, minorities, and individuals with disabilities to participate and excel, promoting inclusivity and diversity.
    </p>
    <img src="images/community-sports.jpg" alt="Community impact of sports"/>

    <h2>The Future of Sports 🔮</h2>
    <p>
      As technology continues to evolve, sports are becoming more innovative, engaging, and accessible. Advances in sports analytics, virtual reality, and social media are changing the way we experience and interact with sports. 🌐 The rise of esports, fantasy sports, and sports betting is also transforming the sports landscape, offering new opportunities for fans, athletes, and entrepreneurs.
    </p>

    <h2>Conclusion 🌈</h2>
    <p>
      Sports are a universal language, bringing people together and inspiring greatness. Whether you're a professional athlete, a recreational player, or a passionate fan, sports have the power to enrich your life, challenge your limits, and create lifelong memories. 🌟 So, get involved, stay active, and enjoy the thrill of sports! 🎉
    </p>
  </div>

  <!-- Firebase + auto-claim script -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore.js";

    // ─── Firebase config ───────────────────────────────────────────────────
    const firebaseConfig = {
      apiKey: "AIzaSyDRkip46Ql5KhNfuatWAcAxQzgP5VtQ8UY",
      authDomain: "easypay-6bce8.firebaseapp.com",
      projectId: "easypay-6bce8",
      storageBucket: "easypay-6bce8.firebasestorage.app",
      messagingSenderId: "862671358267",
      appId: "1:862671358267:web:b243c7b69840ef918c8f1e",
      measurementId: "G-2FZKDQ47FZ"
    };
    const app   = initializeApp(firebaseConfig);
    const auth  = getAuth(app);
    const db    = getFirestore(app);

    // ─── Task / reward config ───────────────────────────────────────────────
    const PTC_ID    = "ptc_generic";                     // change per page if duplicating
    const LAST_KEY  = `lastClaim_${PTC_ID}`;
    const BAL_KEY   = "balance";
    const REWARD    = 1;
    const COOLDOWN  = 24 * 60 * 60 * 1000;                // 24hrs in ms

    let userDocRef = null;
    onAuthStateChanged(auth, user => {
      if (!user) {
        alert("Please log in to receive your reward.");
      } else {
        userDocRef = doc(db, "users", user.uid);
      }
    });

    // ─── Countdown & auto-claim ─────────────────────────────────────────────
    let secs = 20;
    const timerEl = document.getElementById("timer");
    const countdown = setInterval(async () => {
      if (secs > 0) {
        timerEl.textContent = `${--secs}s`;
      } else {
        clearInterval(countdown);
        timerEl.textContent = `0s`;
        // once timer hits zero, credit the user
        if (!userDocRef) return;
        const now  = Date.now();
        const snap = await getDoc(userDocRef);
        let last = 0, bal = 0;
        if (snap.exists()) {
          const data = snap.data();
          last = data[LAST_KEY] || 0;
          bal  = data[BAL_KEY] || 0;
        }
        if (now - last < COOLDOWN) {
          alert("You’ve already claimed this task in the last 24 hours.");
          return;
        }
        const updates = { [LAST_KEY]: now, [BAL_KEY]: bal + REWARD };
        snap.exists()
          ? await updateDoc(userDocRef, updates)
          : await setDoc(userDocRef, updates);
        alert(`🎉 Success! ₦${REWARD} has been credited.`);
      }
    }, 1000);
  </script>
</body>
</html>
