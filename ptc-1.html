<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EasyPay PTC Task</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4fff8;
      color: #222;
      line-height:1.6;
    }
    header {
      background: #0f9d58;
      color: #fff;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 { font-size:1.5rem }
    .timer {
      font-size:1.3rem;
      font-weight:bold;
      background: rgba(255,255,255,0.2);
      padding:0.4rem 1rem;
      border-radius:8px;
    }
    .notice {
      max-width:800px;
      margin:1rem auto;
      background:#e0ffe9;
      border-left:5px solid #0f9d58;
      padding:1rem;
      font-size:0.95rem;
      border-radius:6px;
    }
    .container {
      max-width:800px;
      margin:2rem auto;
      background:#fff;
      border-radius:8px;
      box-shadow:0 4px 10px rgba(0,0,0,0.05);
      padding:1.5rem;
    }
    .section + .section { margin-top:2rem; }
    .section h2 { color:#0f9d58; margin-bottom:0.5rem }
    .section p, .section ul { margin-bottom:1rem }
    .section img {
      width:100%; border-radius:8px;
      margin:1rem 0; max-height:280px;
      object-fit:cover;
    }
    footer {
      text-align:center; padding:1rem;
      font-size:0.85rem; color:#888;
    }
    .toast {
      position:fixed; bottom:20px; left:50%;
      transform:translateX(-50%);
      background:#0f9d58; color:#fff;
      padding:0.8rem 1.5rem; border-radius:5px;
      box-shadow:0 2px 6px rgba(0,0,0,0.2);
      opacity:0; pointer-events:none;
      transition:opacity 0.3s;
      z-index:999;
    }
    .toast.show {
      opacity:1; pointer-events:auto;
    }
  </style>
</head>
<body>

  <header>
    <h1>EasyPay PTC Task</h1>
    <div class="timer" id="timer">20s</div>
  </header>

  <div class="notice">
    <strong>Important!</strong> Your browser must have JavaScript enabled, your ad blocker must be disabled, you must stay on the final page for about 20 seconds, you must have cookies enabled, and you must not use VPN.
  </div>

  <div class="container">
    <!-- FULL BLOG CONTENT BELOW -->
    <div class="section">
      <h2>The World of Sports: A Journey of Passion, Perseverance, and Triumph 🏆</h2>
      <p>Sports have been an integral part of human culture for centuries, bringing people together, fostering community, and inspiring greatness. From the thrill of competition to the joy of recreation, sports play a significant role in our lives, shaping our personalities, building our character, and creating lifelong memories. 🌟</p>
      <img src="images/sports-banner.jpg" alt="Sports banner">
    </div>
    <div class="section">
      <h2>The Benefits of Sports 🌈</h2>
      <p>Engaging in sports offers numerous benefits, including improved physical health, enhanced mental well-being, and increased social connections. Regular physical activity can reduce the risk of chronic diseases, such as heart disease, diabetes, and obesity, while also boosting mood and energy levels. 🏋️‍♀️ Sports also provide opportunities for socialization, teamwork, and leadership development, essential skills for personal and professional growth.</p>
      <img src="images/benefits.jpg" alt="Health benefits of sports">
    </div>
    <div class="section">
      <h2>Popular Sports Around the World 🌎</h2>
      <ul>
        <li><strong>Football (Soccer):</strong> The world's most popular sport, with top leagues like the English Premier League, La Liga, and the Champions League. ⚽️</li>
        <li><strong>Basketball:</strong> A fast-paced, high-flying sport, with the NBA being one of the most prestigious leagues globally. 🏀</li>
        <li><strong>Tennis:</strong> A sport of skill, strategy, and physical endurance, with Grand Slam tournaments like Wimbledon, the US Open, and the Australian Open. 🎾</li>
        <li><strong>Cricket:</strong> A bat-and-ball game with a massive following in countries like India, Australia, and the UK, with international competitions like the World Cup. 🏏</li>
        <li><strong>Volleyball:</strong> A popular team sport, played indoors and on beaches, with international competitions like the Olympics and World Championships. 🏐</li>
      </ul>
      <img src="images/tennis-player.jpg" alt="Tennis player lunging for a shot on clay court">
    </div>
    <div class="section">
      <h2>The Impact of Sports on Society 🌟</h2>
      <p>Sports have a profound impact on society, promoting social cohesion, cultural exchange, and economic growth. Major sporting events like the Olympics, World Cups, and marathons bring people together, fostering a sense of community and national pride. 🏆 Sports also provide opportunities for women, minorities, and individuals with disabilities to participate and excel, promoting inclusivity and diversity.</p>
      <img src="images/community-sports.jpg" alt="Community impact of sports">
    </div>
    <div class="section">
      <h2>The Future of Sports 🔮</h2>
      <p>As technology continues to evolve, sports are becoming more innovative, engaging, and accessible. Advances in sports analytics, virtual reality, and social media are changing the way we experience and interact with sports. 🌐 The rise of esports, fantasy sports, and sports betting is also transforming the sports landscape, offering new opportunities for fans, athletes, and entrepreneurs.</p>
    </div>
    <div class="section">
      <h2>Conclusion 🌈</h2>
      <p>Sports are a universal language, bringing people together and inspiring greatness. Whether you're a professional athlete, a recreational player, or a passionate fan, sports have the power to enrich your life, challenge your limits, and create lifelong memories. 🌟 So, get involved, stay active, and enjoy the thrill of sports! 🎉</p>
    </div>
  </div>

  <footer>&copy; 2025 EasyPay. All rights reserved.</footer>
  <div id="toast" class="toast"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore.js";

    // Firebase setup
    const firebaseConfig = {
      apiKey: "AIzaSyDRkip46Ql5KhNfuatWAcAxQzgP5VtQ8UY",
      authDomain: "easypay-6bce8.firebaseapp.com",
      projectId: "easypay-6bce8",
      storageBucket: "easypay-6bce8.appspot.com",
      messagingSenderId: "862671358267",
      appId: "1:862671358267:web:b243c7b69840ef918c8f1e"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Config
    const PTC_ID = "ptc";              // adjust if duplicating
    const LAST_KEY = `lastClaim_${PTC_ID}`;
    const BAL_KEY = "balance";
    const REWARD = 1;
    const COOLDOWN = 24 * 60 * 60 * 1000;

    const timerEl = document.getElementById("timer");
    const toast = document.getElementById("toast");
    let userDocRef = null;

    function showToast(msg) {
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 3000);
    }

    // Once user is authenticated, start countdown
    onAuthStateChanged(auth, user => {
      if (!user) {
        showToast("Please log in to claim your reward.");
        return;
      }
      userDocRef = doc(db, "users", user.uid);
      startCountdown();
    });

    function startCountdown() {
      let seconds = 20;
      timerEl.textContent = seconds + "s";

      const interval = setInterval(async () => {
        seconds--;
        timerEl.textContent = seconds + "s";

        if (seconds <= 0) {
          clearInterval(interval);
          timerEl.textContent = "0s";
          await claimReward();
        }
      }, 1000);
    }

    async function claimReward() {
      if (!userDocRef) return;
      try {
        const now = Date.now();
        const snap = await getDoc(userDocRef);
        let last = 0, bal = 0;

        if (snap.exists()) {
          const data = snap.data();
          last = data[LAST_KEY] || 0;
          bal = data[BAL_KEY] || 0;
        }

        if (now - last < COOLDOWN) {
          return showToast("You can only claim once every 24 hours.");
        }

        const updates = { [LAST_KEY]: now, [BAL_KEY]: bal + REWARD };
        snap.exists()
          ? await updateDoc(userDocRef, updates)
          : await setDoc(userDocRef, updates);

        showToast(`🎉 ₦${REWARD} has been credited!`);
      } catch (e) {
        console.error(e);
        showToast("Error claiming reward. Try again later.");
      }
    }
  </script>
</body>
</html>
