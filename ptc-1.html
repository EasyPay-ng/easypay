<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EasyPay - PTC</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f0fdf4;
      color: #111;
      padding: 20px;
    }
    header {
      background-color: #00c851;
      color: white;
      padding: 15px;
      font-size: 22px;
      text-align: center;
      border-radius: 8px;
    }
    .notice {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeeba;
      padding: 10px 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-weight: bold;
    }
    .timer {
      font-size: 24px;
      font-weight: bold;
      color: #00c851;
      text-align: center;
      margin: 20px 0;
    }
    .blog {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0,0,0,0.05);
      line-height: 1.7;
    }
    .blog img {
      max-width: 100%;
      border-radius: 8px;
      margin: 15px 0;
    }
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #00c851;
      color: white;
      padding: 10px 18px;
      border-radius: 6px;
      display: none;
    }
  </style>
</head>
<body>
  <header>EasyPay - View & Earn</header>

  <div class="notice">
    Important! Your browser must have JavaScript enabled, your ad blocker must be disabled, you must stay on the final page for about 20 seconds, you must have cookies enabled, and you must not use VPN.
  </div>

  <div class="timer">Time Remaining: <span id="countdown">20</span> seconds</div>

  <div class="blog">
    <h2>The World of Sports: A Journey of Passion, Perseverance, and Triumph</h2>
    <p>Sports have been an integral part of human culture for centuries, bringing people together, fostering community, and inspiring greatness...</p>
    <img src="sports_blog_image.jpg" alt="Sports Blog">
    <h3>The Benefits of Sports</h3>
    <p>Engaging in sports offers numerous benefits, including improved physical health, enhanced mental well-being, and increased social connections...</p>
    <h3>Popular Sports Around the World</h3>
    <ul>
      <li><b>Football (Soccer)</b>: The world's most popular sport... ‚öΩÔ∏è</li>
      <li><b>Basketball</b>: A fast-paced, high-flying sport... üèÄ</li>
      <li><b>Tennis</b>: A sport of skill, strategy, and physical endurance... üéæ</li>
      <li><b>Cricket</b>: A bat-and-ball game with a massive following... üèè</li>
      <li><b>Volleyball</b>: A popular team sport... üèê</li>
    </ul>
    <h3>The Impact of Sports on Society</h3>
    <p>Sports have a profound impact on society, promoting social cohesion, cultural exchange, and economic growth...</p>
    <h3>The Future of Sports</h3>
    <p>As technology continues to evolve, sports are becoming more innovative, engaging, and accessible...</p>
    <h3>Conclusion</h3>
    <p>Sports are a universal language, bringing people together and inspiring greatness...</p>
  </div>

  <div class="toast" id="toastMsg"></div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyDRkip46Ql5KhNfuatWAcAxQzgP5VtQ8UY",
      authDomain: "easypay-6bce8.firebaseapp.com",
      projectId: "easypay-6bce8",
      storageBucket: "easypay-6bce8.appspot.com",
      messagingSenderId: "862671358267",
      appId: "1:862671358267:web:b243c7b69840ef918c8f1e"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Redirect if not logged in
    auth.onAuthStateChanged(user => {
      if (!user) {
        window.location.href = "login.html";
      } else {
        startCountdown(user);
      }
    });

    function showToast(message) {
      const toast = document.getElementById("toastMsg");
      toast.textContent = message;
      toast.style.display = "block";
      setTimeout(() => toast.style.display = "none", 4000);
    }

    function startCountdown(user) {
      let timeLeft = 20;
      const timerDisplay = document.getElementById("countdown");

      const timer = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;
        if (timeLeft <= 0) {
          clearInterval(timer);
          creditUser(user);
        }
      }, 1000);
    }

    function creditUser(user) {
      const uid = user.uid;
      const userRef = db.collection("users").doc(uid);
      const now = Date.now();

      userRef.get().then(doc => {
        const data = doc.data();
        const lastPTC = data.lastPTC1 || 0;
        const balance = data.balance || 0;

        if (now - lastPTC >= 86400000) {
          userRef.update({
            balance: balance + 1,
            lastPTC1: now,
            transactions: firebase.firestore.FieldValue.arrayUnion({
              type: "PTC Earnings",
              amount: 1,
              date: new Date().toLocaleString()
            })
          });
          showToast("‚Ç¶1 credited successfully!");
        } else {
          showToast("Already claimed today. Try again after 24hrs.");
        }
      });
    }
  </script>
</body>
</html>
