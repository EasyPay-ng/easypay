<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advertise Task</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background-color: #f9fff9; color: #222; padding: 20px; }
    h1 { color: #006400; }
    .container { max-width: 500px; margin: auto; padding: 20px; border-radius: 12px; background-color: #fff; box-shadow: 0 0 12px rgba(0, 100, 0, 0.1); }
    label { display: block; margin-top: 12px; font-weight: 600; }
    input, select, textarea { width: 100%; padding: 10px; margin-top: 6px; border-radius: 6px; border: 1px solid #ccc; }
    button { margin-top: 20px; background-color: #006400; color: white; padding: 12px; border: none; width: 100%; border-radius: 8px; font-size: 16px; cursor: pointer; }
    button:disabled { background-color: #999; cursor: not-allowed; }
    #totalCost { font-weight: bold; margin-top: 10px; color: #006400; }
    .proof-table { width: 100%; margin-top: 40px; border-collapse: collapse; }
    .proof-table th, .proof-table td { padding: 10px; border: 1px solid #ddd; text-align: center; }
    .proof-table th { background-color: #e6ffe6; }
  </style>
</head>
<body>

  <div class="container">
    <h1>Advertise Task</h1>
    <label>Task Title</label>
    <input type="text" id="taskTitle" required />

    <label>Platform</label>
    <select id="platform" required>
      <option value="">Select Platform</option>
      <option value="WhatsApp">WhatsApp</option>
      <option value="Facebook">Facebook</option>
      <option value="Instagram">Instagram</option>
      <option value="Telegram">Telegram</option>
      <option value="TikTok">TikTok</option>
      <option value="Website">Website</option>
      <option value="App">App</option>
      <option value="Twitter">Twitter</option>
      <option value="YouTube">YouTube</option>
    </select>

    <label>Subcategory</label>
    <select id="subcategory" required>
      <option value="">Select Subcategory</option>
    </select>

    <label>Number of Workers</label>
    <input type="number" id="workers" min="1" value="1" required />

    <div id="totalCost">Total Cost: ₦0</div>

    <label>Task Description</label>
    <textarea id="description" required></textarea>

    <label>Task Link</label>
    <input type="url" id="taskLink" required />

    <button id="submitBtn" onclick="submitTask()" disabled>Submit Task</button>
  </div>

  <div class="container" id="proofSection" style="display: none;">
    <h2>Task Completion Proofs</h2>
    <table class="proof-table">
      <thead>
        <tr><th>User</th><th>Proof</th><th>Date</th><th>Action</th></tr>
      </thead>
      <tbody id="proofTableBody"></tbody>
    </table>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = { apiKey: "AIzaSyDRkip46Ql5KhNfuatWAcAxQzgP5VtQ8UY", authDomain: "easypay-6bce8.firebaseapp.com", projectId: "easypay-6bce8", storageBucket: "easypay-6bce8.appspot.com", messagingSenderId: "862671358267", appId: "1:862671358267:web:b243c7b69840ef918c8f1e" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore(), auth = firebase.auth();

    const subcategoryData = { /* same data as before */ };

    const titleInput = document.getElementById("taskTitle");
    const platformSelect = document.getElementById("platform");
    const subcategorySelect = document.getElementById("subcategory");
    const workersInput = document.getElementById("workers");
    const descriptionInput = document.getElementById("description");
    const taskLinkInput = document.getElementById("taskLink");
    const totalCostDiv = document.getElementById("totalCost");
    const submitBtn = document.getElementById("submitBtn");

    let currentUnitCost = 0;

    // Attach input listeners to all fields
    [titleInput, platformSelect, workersInput, descriptionInput, taskLinkInput].forEach(el => el.addEventListener("input", updateCost));
    platformSelect.addEventListener("change", () => {
      subcategorySelect.innerHTML = "<option value=''>Select Subcategory</option>";
      (subcategoryData[platformSelect.value] || {}).forEach?.(() => {});
      Object.entries(subcategoryData[platformSelect.value] || {}).forEach(([name, price]) => {
        const opt = document.createElement("option"); opt.value = name;
        opt.textContent = `${name} (₦${price})`;
        opt.dataset.price = price;
        subcategorySelect.appendChild(opt);
      });
      currentUnitCost = 0; updateCost();
    });

    subcategorySelect.addEventListener("change", () => {
      const sel = subcategorySelect.selectedOptions[0];
      currentUnitCost = sel ? +sel.dataset.price : 0;
      updateCost();
    });

    function updateCost() {
      const workers = +workersInput.value || 0;
      totalCostDiv.textContent = `Total Cost: ₦${currentUnitCost * workers}`;
      submitBtn.disabled = !areFieldsValid();
    }

    function areFieldsValid() {
      return titleInput.value.trim() && platformSelect.value && subcategorySelect.value
        && +workersInput.value > 0 && descriptionInput.value.trim()
        && taskLinkInput.value.trim();
    }

    async function submitTask() {
      if (!areFieldsValid()) return alert("Please complete all fields before submitting.");
      // ...original submitTask logic...
    }
  </script>

</body>
</html>
